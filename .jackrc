# Add ~/bin to PATH
export PATH="$HOME/bin:$PATH"

alias hello="echo 'ðŸ‘‹'"

# Write AWS Saml Credentials from Github Secret
function write_aws_saml_credentials() {
  if [[ -n "${ROVER_AWS_SAML_HELPER_CREDENTIALS:-}" ]]; then
    mkdir -p "$HOME/.aws"
    echo "$ROVER_AWS_SAML_HELPER_CREDENTIALS" | base64 -d >"$HOME/.aws/credentials"
    chmod u=rw,go= "$HOME/.aws/credentials"
  fi
}

write_aws_saml_credentials

# Set git rebase default
git config --global pull.rebase true

# Load aliases
if [[ -f \/workspaces/web/profile ]]; then
  . \/workspaces/web/profile
fi

# NVM loading
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion

git config --global alias.start '!f() { \
    if [ -z "$1" ]; then echo "Usage: git start <branch-name>"; return 1; fi; \
    if [ -n "$(git status --porcelain)" ]; then git stash; stashed=1; fi; \
    git fetch origin; \
    git checkout -b "$1" origin/HEAD; \
    if [ "$stashed" = "1" ]; then git stash pop; fi; \
}; f'

git config --global alias.up '!git fetch origin && git rebase origin/HEAD'
